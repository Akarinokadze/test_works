# Тестовое задание Строительный Двор

## Формулировка задачи

Дана выгрузка заказов с позициями.

  * Определить товары-"якоря"(основные) и дополнительные товары(сопутствующие).

  * Формат результата:

    * список основных и сопутствующих товаров по всей выборке;

    * список основных и сопутствующих товаров по каждому городу.
    
Данные даны как есть, без дополнительных пояснений. Интересны гипотезы, в рамках которых будет предложено решение.

## Гипотезы и допущения

Под основным товаром будем понимать первичные товары за которыми покупатель пришёл в магазин, основная цель, без которой посещение магазина станет, скорее всего, неоправданным. Для магазина такие товары предоставляют основную мотивацию для посещения клиентами, а также, значительную часть дохода.

  * Можно предположить, что основными товарами будут являться те, что чаще других встречаются как отдельные покупки (исходя из предположения что человек зашёл за конкретной вещью и взял только её), тем не менее, возможны ситуации когда покупатель проходил мимо магазина и зашёл за небольшим товаром явно сопутствующего характера (например, кончились диски для УШМ, по дороге зашёл и докупил). Данное предположение сильно зависит от возможности покупателя зайти в магазин дополнительно к другим целям, так, магазины формата отдельностоящего гипермаркета хорошо подходят под эту теорию (вряд ли клиент поедет в такой магазин только за сопутствующим товаром). Формат же супермаркета в комплексе с другими типами магазинов будут наоборот, способствовать таким спонтанным небольшим покупкам "по пути". Поскольку наши данные обезличены и мы не знаем типы магазинов, предположение о принадлежности к основным или дополнительным для чеков с 1 товаром будет неоправданным допущением.
  * Можно ожидать что основной товар будет иметь максимальную стоимость в чеке из нескольких позиций, т.к. это является прямым следствием заложенной в определение бизнес-логики. Для отбора основных товаров проанализируем чеки с более чем одной позицией и отберём из них самые дорогие товары.
  * Если возникнет необходимость сузить каталог основных товаров, можно будет дополнить условие отбора частотой с которой встречаются товары в чеках и/или стоимостным критерием.

Под сопутствующими товарами будем понимать товары которые не являются первичной целью похода в магазин, но могут быть комплиментарными к основному товару, дополнять его свойства, или быть необходимыми в процессе эксплуатации основного товара.

  * Предполагаемыми характеристиками являются небольшая цена (при высокой цене основного товара покупатель не будет испытывать угрызения о излишне потраченных средствах), относительно основного товара, наличие в разных комбинациях в чеках с основными товарами (частота появления в чеках).

## N.B.

В качестве метода решения данной задачи можно было бы попробовать создать корпус из чеков и пропустить его через CountVectorizer, добавить к векторам цены товаров и попробовать кластеризовать получившиеся данные. Поскольку у нас нет в наличии меток классов мерой успешности разделения можно было бы считать логическую обоснованность деления конкретных товаров на основные и сопутствующие, а также меру близости товаров внутри кластеров по характеристикам. Однако, предоставленная информация обезличенна и у нас нет в наличии каких-либо характеристик товаров, кроме цены и вхождения в различные чеки для оценки адекватности разбиения по кластерам. В связи с этим был исследован представленный ниже эвристический подход.

## Используемый стек

Jupyter Notebook

Python - collections, numpy, matplotlib, pandas, ydata_profiling, statsmodels